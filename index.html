<!DOCTYPE html>
<html>
  <head>
    <title>CrosswordGame</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />
    <lang="he" dir="rtl"></lang=>
    <script src="jquery.js"></script>
    <link rel="stylesheet" type="text/css" href="css/font-awesome.css" />
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <script src="crossword.js"></script>
    <script src="puzzle.js"></script>
    <script src="ttss.js"></script>
    </script>
  </head>
  <body>
    <div class="screen" id="game">
      <div id="ttscontainer">
        <div class="puzzle">
			<div id="crossword"></div>
			  <div class="buttons">
		<button onclick="toggleAnswer()">
		  <i class="fa fa-eye"></i><i class="fa fa-eye-slash"></i><span class="solution">הצג פתרון</span> 
		</button>
		<button onclick="location.reload()">
		  <i class="fa fa-refresh"></i> <span style="margin-right:.3rem">החלף תשבץ</span> 
		</button>
	  </div>
	  </div>
		<div class="tables">
			<div class="table">
				  <table id="clues">
					<thead>
					  <tr>
						<th>מאוזן</th>
					  </tr>
					</thead>
					<tbody>
					  <tr>
						<td><ul id="across"></ul></td>
					  </tr>
					</tbody>
				  </table>
			</div>
			<div class="table2">
				  <table id="clues">
					<thead>
					  <tr>
						<th>מאונך</th>
					  </tr>
					</thead>
					<tbody>
					  <tr>
						<td><ul id="down"></ul></td>
					  </tr>
					</tbody>
				  </table>
			</div>
		</div>
      </div>

      <div id="vkeyboard">
        <h3>Enter the correct letter</h3>
        <div id="kbtnlist"></div>
        <button onclick="$('#vkeyboard').hide()">
          <i class="fa fa-times"></i> Close
        </button>
      </div>
    </div>

    <div id="appbar">
      <span class="abitem" onclick="toggledrawer()"
        ><i class="fa fa-bars"></i
      ></span>
      <span class="abitem2">תשבץ</span>
      <span class="abitem" style="float: right" onclick="toggleAnswer()"
        ><i class="fa fa-eye"></i
      ><i class="fa fa-eye-slash"></i
      ></span>
    </div>
    <div id="drawer">
      <div class="ditem" onclick="setqcount(12)">
        <i class="fa fa-edit"></i> קל
      </div>
      <div class="ditem" onclick="setqcount(20)">
        <i class="fa fa-edit"></i> בינוני
      </div>
      <div class="ditem" onclick="setqcount(30)">
        <i class="fa fa-edit"></i> קשה
      </div>
      <!-- <div class="ditem" onclick="resetsettings()">
        <i class="fa fa-refresh"></i> איפוס
      </div> -->
    </div>

    <script>
		function isMobile() {
  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
}

      function setqcount(n) {
        appdata.qcount = n
        saveData()
        location.reload()
      }

      function resetsettings() {
        localStorage.clear()
        location.reload()
      }

      function tsep(x) {
        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")
      }

      function vtext(text) {
        var letters = /^[A-Za-z0-9]+$/
        if (text.match(letters)) return true
        else return false
      }
      function toggledrawer() {
        $("#drawer").toggle()
		$('#drawer').addClass("enter")
      }
    </script>

    <script>
		$('.fa-eye-slash').hide()
      var canswershown = false
      function toggleAnswer() {
        if (canswershown) {
          $(".canswer").hide()
          $(".uanswer").show()
		  $('.fa-eye-slash').hide()
		  $('.fa-eye').show()
		  $('.solution').html('הצג פתרון')

          canswershown = false
        } else {
          $(".canswer").show()
          $(".uanswer").hide()
		  $('.fa-eye-slash').show()
		  $('.fa-eye').hide()
		  $('.solution').html('הסתר פתרון')
		  
          canswershown = true
        }
      }
  function activatetts() {
    $("td").each(function() {
        $(this).attr('tabindex', '0');
        $(this).attr('contentEditable', 'true');

        $(this).on('keydown', function(event) {
            var key = event.key;

            // Regular expression to detect a Hebrew character
            var hebrewCharRegex = /[\u0590-\u05FF]/;

            // If the key is a single Hebrew letter (and not a control key), or the Backspace/Delete key
            if ((key.length === 1 && key.match(hebrewCharRegex)) || key === 'Backspace' || key === 'Delete') {
                // If a Hebrew letter key was pressed, replace the cell's content with the new letter.
                // If the Backspace or Delete key was pressed, clear the cell's content.
                $(this).text("");
                if (key.length === 1 && key.match(hebrewCharRegex)) {
                    $(this).append(key);
                }
            }

            // Prevent propagation of the event, so the letter doesn't get appended twice (or deleted twice)
            event.preventDefault();
        });
    });
}





      var selectedua = -1
      function typechar(c) {
        $("#" + selectedua).html(c)
        $("#vkeyboard").hide()
      }

      function initvkeyboard() {
        var chars = [
          "א",
          "ב",
          "ג",
          "ד",
          "ה",
          "ו",
          "ז",
          "ח",
          "ט",
          "י",
          "כ",
          "ל",
          "מ",
          "נ",
          "ס",
          "ע",
          "פ",
          "צ",
          "ק",
          "ר",
          "ש",
          "ת",
        ]
        for (var i = 0; i < chars.length; i++) {
          $("#kbtnlist").append(
            "<div class='kbtn' onclick=typechar('" +
              chars[i] +
              "')>" +
              chars[i] +
              "</div>"
          )
        }
      }

      setTimeout(function () {
        startttsgame()
        activatetts()
        initvkeyboard()
        $("#crossword").css({
          width:
            $("tbody:eq(0)").find("tr:eq(0)").find("td").length * 32 + "px",
        })
        $("#game").show()
      }, 500)
    </script>
  </body>
</html>
